<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAVORITE | J.Crew</title>
    <link rel="stylesheet" href="/css/women.css">
    <link rel="icon" href="https://www.jcrew.com/favicon.ico">

</head>
<body>
    <h3 id="intro">YOUR WISHLIST</h3>
    <div id="products">
        <!-- append products here -->
    </div>
</body>
</html>

<script>
    let productBox = document.getElementById("products")

    let array = JSON.parse(localStorage.getItem("favItem"));

    displayProduct(array,productBox,array);

    function displayProduct(array,box,arrayFav){
    
    box.innerHTML = null;
    

    function create(arg){
        return document.createElement(arg);
    }
    array.forEach((el) => {
        let divone = create("div");

        let heart = create("span");
        
        let itag = create("i");// i tag to get favorite icon
        itag.setAttribute("class","fa-solid fa-heart fa-lg")//this was changed as compared to export js
        let strike = false;
        

        heart.append(itag);
        heart.addEventListener("click",()=>{
            /*if(strike){
                itag.setAttribute("class","fa-solid fa-heart fa-lg");

                wishlist(el,arrayFav,strike)
                //this will going to add element to the wishlist
                displayProduct(array,box,arrayFav)
                strike = !strike;
                

            }*/
            //else{
                //itag.setAttribute("class","fa-regular fa-heart fa-lg")

                wishlist(el,arrayFav,strike)
                //this will going to delete the element which is meant to be deleted
                displayProduct(array,box,arrayFav)
                //strike = !strike;
               
                
            //}
            
        })
        
        let title = create("p");//name of product
        title.innerText = el.name;
        let img = create("img")//image of product
        img.src = el.imgUrl;
        let price= create("span");//price of product
        price.innerText = " INR "+el.price;
        price.style.color = "#da2a2a"
        let stkPrice = create("span")
        stkPrice.innerText = "INR "+el.strikePrice;//strike price of product
        stkPrice.style.textDecoration = "line-through";
        

        divone.append(heart,img,title,stkPrice,price)//appending item object keys value inside a div called divone

        box.append(divone);//appending divone to the div product div of html

    });
}


function wishlist(arg,arrayFav,stk){
    if(stk == true){
        arrayFav.push(arg);
        localStorage.setItem("favItem",JSON.stringify(arrayFav));
    }
    else{
        let favArr = JSON.parse(localStorage.getItem("favItem"));;
                let spl;
                for(let i=0;i<favArr.length;i++){
                    if(favArr[i].name == arg.name){
                        spl = i;
                    }
                }
            arrayFav.splice(spl,1);
            
            localStorage.setItem("favItem",JSON.stringify(arrayFav));;
    }
    
}
</script>
<script src="https://kit.fontawesome.com/448b55d940.js" crossorigin="anonymous"></script>